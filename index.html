<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>7 D‚Äôs Business Alignment Snapshot</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --panel:#111827; /* gray-900 */
      --muted:#94a3b8; /* slate-400 */
      --text:#e5e7eb; /* gray-200 */
      --primary:#22c55e; /* green-500 */
      --primary-600:#16a34a; /* green-600 */
      --accent:#38bdf8; /* sky-400 */
      --warn:#f97316; /* orange-500 */
      --danger:#ef4444; /* red-500 */
      --ring: rgba(56,189,248,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1024, #0f172a 25%, #0b1024);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",sans-serif}
    .wrap{max-width:920px;margin:40px auto;padding:24px}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(148,163,184,.15);backdrop-filter: blur(8px);border-radius:20px;padding:28px;box-shadow:0 10px 40px rgba(0,0,0,.25)}
    h1{font-weight:800;letter-spacing:.2px;margin:.2rem 0 1rem;font-size:clamp(26px,3.6vw,40px)}
    h2{font-weight:700;margin:1.5rem 0 .75rem}
    p.lead{color:#cbd5e1;max-width:60ch}
    .badge{display:inline-flex;gap:.5ch;align-items:center;border:1px solid rgba(148,163,184,.25);padding:.25rem .6rem;border-radius:999px;color:#cbd5e1;font-size:.85rem}
    .muted{color:var(--muted)}
    .grid{display:grid;gap:18px}
    .q{background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.12);padding:18px;border-radius:16px}
    .q h3{margin:0 0 .35rem;font-size:1rem;font-weight:700}
    .likert{display:grid;grid-template-columns:1fr repeat(5,42px);gap:8px;align-items:center}
    .likert>span{font-size:.9rem;color:var(--muted)}
    .likert label{position:relative;display:grid;place-items:center}
    .likert input{appearance:none;width:32px;height:32px;border-radius:999px;border:2px solid rgba(148,163,184,.45);background:#0b1024;transition:.2s}
    .likert input:checked{border-color:var(--primary);background:radial-gradient(circle at 50% 50%,var(--primary) 0 8px, transparent 9px 100%)}
    .likert input:focus-visible{outline:3px solid var(--ring);outline-offset:2px}
    .progress{height:10px;background:rgba(148,163,184,.2);border-radius:999px;overflow:hidden}
    .progress>div{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--primary));transition:width .35s}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    button, .btn{cursor:pointer;background:var(--primary);border:1px solid var(--primary-600);color:#06210f;padding:10px 16px;border-radius:12px;font-weight:700}
    button:hover, .btn:hover{filter:brightness(1.05)}
    .btn.secondary{background:transparent;color:var(--text);border:1px solid rgba(148,163,184,.35)}
    .field{display:grid;gap:6px;margin:.75rem 0}
    input[type="text"],input[type="email"],select,textarea{background:#0b1024;border:1px solid rgba(148,163,184,.3);color:var(--text);border-radius:12px;padding:10px 12px}
    textarea{min-height:90px}
    .results{display:none}
    .pill{padding:.25rem .6rem;border-radius:9999px;border:1px solid rgba(148,163,184,.25);}
    .chart{display:grid;gap:10px;margin:16px 0}
    .bar{display:grid;grid-template-columns:110px 1fr 48px;gap:10px;align-items:center}
    .track{height:12px;background:rgba(148,163,184,.25);border-radius:999px;overflow:hidden}
    .fill{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#38bdf8);transition:width .6s}
    .severity{font-size:.85rem}
    .sev-critical{color:var(--danger)}
    .sev-needs{color:var(--warn)}
    .sev-healthy{color:#86efac}
    .footer-note{font-size:.85rem;color:var(--muted)}
    @media (max-width:640px){
      .likert{grid-template-columns:1fr repeat(5,36px)}
      .bar{grid-template-columns:90px 1fr 44px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="intro">
        <span class="badge">üß≠ 7 D‚Äôs Business Alignment Snapshot</span>
        <h1>Alignment is the new advantage</h1>
        <p class="lead">Rate 21 statements to see your strongest D and your #1 priority area. You‚Äôll get a tailored game plan with quick wins for the next 90 days.</p>
        <div class="progress" aria-label="progress"><div id="prog"></div></div>
      </div>

      <form id="quiz" class="grid" autocomplete="off"></form>

      <section id="post" style="display:none">
        <h2>One more thing</h2>
        <div class="grid">
          <div class="field">
            <label for="feltWeakest">Which D <em>feels</em> weakest right now?</label>
            <select id="feltWeakest" required></select>
          </div>
          <div class="field">
            <label for="focusWhy">If you focused on one area for 90 days, which would it be‚Äîand why?</label>
            <textarea id="focusWhy" placeholder="Your quick reflection‚Ä¶"></textarea>
          </div>
          <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px">
            <div class="field"><label for="name">Name</label><input id="name" type="text" placeholder="Jane Doe" /></div>
            <div class="field"><label for="email">Email</label><input id="email" type="email" placeholder="jane@company.com" /></div>
            <div class="field"><label for="size">Company size</label>
              <select id="size">
                <option value="">Select‚Ä¶</option>
                <option>&lt;5</option><option>5‚Äì10</option><option>11‚Äì25</option><option>26‚Äì50</option><option>51‚Äì100</option><option>100+</option>
              </select>
            </div>
          </div>
          <div class="actions">
            <button id="seeResults" type="button">See my results</button>
            <button id="reset" type="button" class="secondary">Reset</button>
          </div>
        </div>
      </section>

      <section id="results" class="results">
        <h2>Your Alignment Snapshot</h2>
        <p><strong>Top Strength:</strong> <span id="topStrength" class="pill"></span> &nbsp; <strong>Priority Focus:</strong> <span id="priorityFocus" class="pill"></span></p>
        <div id="severityNote" class="footer-note"></div>
        <div class="chart" id="bars"></div>

        <article id="ending" class="q"></article>

        <div class="actions">
          <a id="cta" class="btn" target="_blank" rel="noopener">Get your 90‚Äëday One‚ÄëPage Alignment Plan</a>
          <button id="copy" type="button" class="secondary">Copy results</button>
          <button id="print" type="button" class="secondary">Save/print PDF</button>
          <button id="retake" type="button" class="secondary">Retake</button>
        </div>
        <p class="footer-note">We don‚Äôt send data anywhere in this demo‚Äîeverything stays in your browser. Hook up your form endpoint if you want to capture responses.</p>
      </section>
    </div>
  </div>

  <script>
    // ====== CONFIG ======
    const BOOKING_URL = "https://example.com/consult"; // ‚Üê replace with your link

    const DS = [
      { key:"DNA", label:"DNA (Identity & Values)", items:[
        "Our mission and values are documented and used in daily decisions.",
        "Our team can clearly explain what makes us different and who we serve best.",
        "We hire, promote, and part ways using values‚Äëbased behaviors."
      ]},
      { key:"Design", label:"Design (Structure & Roles)", items:[
        "Our org chart and responsibilities are clear and current.",
        "Onboarding sets people up to win within 30 days.",
        "We have the right people in the right seats for our goals."
      ]},
      { key:"Decisions", label:"Decisions (Strategy & Focus)", items:[
        "We have a simple 12‚Äëmonth plan with 3‚Äì5 company priorities.",
        "Our weekly leadership meeting produces clear owners, dates, and follow‚Äëthrough.",
        "We routinely say ‚Äòno‚Äô to good ideas that don‚Äôt fit the strategy."
      ]},
      { key:"Delegation", label:"Delegation (Ownership & Accountability)", items:[
        "The owner spends 70%+ time in their zone of genius.",
        "Outcomes and expectations are crystal clear for every role.",
        "Leaders empower decisions without taking them back."
      ]},
      { key:"Data", label:"Data (Clarity & Measurement)", items:[
        "We track a short list of KPIs tied to our goals.",
        "We review P&L, cash, and pipeline on a set monthly rhythm.",
        "We adjust plans based on data, not anecdotes."
      ]},
      { key:"Delight", label:"Delight (Culture & Customer Experience)", items:[
        "Our customer journey is mapped and consistently delivered.",
        "We collect reviews/NPS and act on feedback every month.",
        "Our culture is life‚Äëgiving; engagement is high and turnover is low."
      ]},
      { key:"Destiny", label:"Destiny (Vision & Legacy)", items:[
        "We have an inspiring 3‚Äëyear picture everyone knows.",
        "Our growth flywheel is defined and in motion.",
        "People see how their work connects to impact and legacy."
      ]},
    ];

    const ENDINGS = {
      DNA:{
        title:"Priority Focus: DNA (Identity & Values)",
        body:`Your core identity isn‚Äôt clearly guiding daily choices. Symptoms: mixed messages, values on the wall not in the hall.
Quick wins: (1) Run a 90‚Äëmin DNA workshop to define 3‚Äì5 values with behaviors. (2) Write a one‚Äëparagraph ‚ÄúWho we serve + why we win.‚Äù (3) Start ‚Äúvalues stories‚Äù in weekly meetings.`
      },
      Design:{
        title:"Priority Focus: Design (Structure & Roles)",
        body:`Roles and structure don‚Äôt match the goals. Symptoms: unclear ownership, overloaded leaders, slow onboarding.
Quick wins: (1) Publish a one‚Äëpage org chart with role outcomes. (2) Create role cards (purpose, outcomes, KPIs, rhythms). (3) Add a 30‚Äëday onboarding checklist for every seat.`
      },
      Decisions:{
        title:"Priority Focus: Decisions (Strategy & Focus)",
        body:`Too many priorities = stalled progress. Symptoms: reactive work, whiplash, meetings without decisions.
Quick wins: (1) Pick 3 company priorities for the next 90 days. (2) Install a weekly leadership meeting agenda (scorecard ‚Üí priorities ‚Üí blockers ‚Üí commitments). (3) Add a ‚ÄúStop/Start/Continue‚Äù review monthly.`
      },
      Delegation:{
        title:"Priority Focus: Delegation (Ownership & Accountability)",
        body:`The owner is the bottleneck. Symptoms: rework, stalled initiatives, decision ping‚Äëpong.
Quick wins: (1) Do a time audit; move 10 hours/week into your zone of genius. (2) Use ESAT‚ÄîExpectations, Support, Accountability, Trust‚Äîon every handoff. (3) Build a ‚ÄúGenius Zone Delegation Matrix‚Äù and delegate 3 recurring tasks this week.`
      },
      Data:{
        title:"Priority Focus: Data (Clarity & Measurement)",
        body:`You‚Äôre flying without instruments. Symptoms: surprise cash crunches, ‚Äúfeels like‚Äù planning.
Quick wins: (1) Choose 6‚Äì8 KPIs (leading + lagging). (2) Stand up a simple weekly dashboard. (3) Add a monthly finance rhythm: P&L, cash, pipeline, and decisions.`
      },
      Delight:{
        title:"Priority Focus: Delight (Culture & Customer Experience)",
        body:`Experience is inconsistent for clients or team. Symptoms: uneven delivery, few reviews/referrals, morale dips.
Quick wins: (1) Map the customer journey; set two service standards. (2) Close the loop on feedback every month. (3) Celebrate ‚Äúvalues in action‚Äù weekly to lift culture.`
      },
      Destiny:{
        title:"Priority Focus: Destiny (Vision & Legacy)",
        body:`People can‚Äôt see the future you‚Äôre building. Symptoms: low inspiration, scattered efforts, short‚Äëtermism.
Quick wins: (1) Draft a vivid 3‚Äëyear picture (one page). (2) Define your growth flywheel. (3) Share the story‚Äîwhy it matters now‚Äîthen align goals and roles.`
      },
      Aligned:{
        title:"Beautifully Aligned (Keep Building the Flywheel)",
        body:`Strong across the 7 D‚Äôs‚Äîwell done. Your next edge is focus.
Next moves: (1) Pick a single ‚Äúforce multiplier‚Äù project for the next 90 days. (2) Raise the bar on one KPI per department. (3) Mentor the next generation of leaders.`
      }
    };

    // ====== RENDER ======
    const quizEl = document.getElementById('quiz');
    const postEl = document.getElementById('post');
    const prog = document.getElementById('prog');

    const questions = DS.flatMap((d) => d.items.map((text, idx) => ({
      id: `${d.key}_${idx+1}`,
      dKey: d.key,
      dLabel: d.label,
      text
    })));

    // shuffle display but keep mapping
    const shuffled = [...questions].sort(() => Math.random() - 0.5);

    function renderLikert(q){
      return `
      <div class="q" data-qid="${q.id}" data-d="${q.dKey}">
        <h3>${q.text}</h3>
        <div class="likert" role="group" aria-label="${q.text}">
          <span>Not true</span>
          ${[1,2,3,4,5].map(n=>`<label><input type="radio" name="${q.id}" value="${n}" aria-label="${n}"></label>`).join('')}
        </div>
      </div>`
    }

    quizEl.innerHTML = `
      <h2>Rate each statement (1‚Äì5)</h2>
      ${shuffled.map(renderLikert).join('')}
      <div class="actions"><button id="continue" type="button">Continue</button></div>
    `;

    // progress tracking
    function updateProgress(){
      const answered = document.querySelectorAll('#quiz input[type="radio"]:checked').length;
      const pct = Math.round((answered/21)*100);
      prog.style.width = pct + '%';
      prog.ariaValueNow = pct;
    }
    quizEl.addEventListener('change', updateProgress);
    updateProgress();

    document.getElementById('continue').addEventListener('click', () => {
      const total = document.querySelectorAll('#quiz input[type="radio"]:checked').length;
      if(total < 21){
        alert(`Please answer all questions (${21-total} left).`);
        return;
      }
      // populate selects
      const felt = document.getElementById('feltWeakest');
      felt.innerHTML = '<option value="">Select‚Ä¶</option>' + DS.map(d=>`<option value="${d.key}">${d.label}</option>`).join('');
      quizEl.style.display='none';
      postEl.style.display='block';
      prog.style.width = '100%';
    });

    // ====== SCORING ======
    function severity(score){
      if(score <= 7) return {label:'Critical misalignment', cls:'sev-critical'};
      if(score <= 10) return {label:'Needs work', cls:'sev-needs'};
      return {label:'Healthy', cls:'sev-healthy'};
    }

    function computeScores(){
      const scores = Object.fromEntries(DS.map(d=>[d.key,0]));
      document.querySelectorAll('#quiz input[type="radio"]:checked').forEach(input => {
        const qDiv = input.closest('.q');
        const key = qDiv.dataset.d;
        scores[key] += Number(input.value);
      });
      return scores;
    }

    // ====== RESULTS ======
    const resEl = document.getElementById('results');
    const topStrengthEl = document.getElementById('topStrength');
    const priorityFocusEl = document.getElementById('priorityFocus');
    const barsEl = document.getElementById('bars');
    const endingEl = document.getElementById('ending');
    const ctaEl = document.getElementById('cta');

    function showResults(){
      const scores = computeScores();
      const entries = Object.entries(scores); // [key, score]
      const maxScore = Math.max(...entries.map(([_,s])=>s));
      const minScore = Math.min(...entries.map(([_,s])=>s));

      const highs = entries.filter(([_,s])=>s===maxScore).map(([k])=>k);
      const lows  = entries.filter(([_,s])=>s===minScore).map(([k])=>k);

      const topKey = highs[0];
      const felt = document.getElementById('feltWeakest').value;
      const lowKey = lows.includes(felt) ? felt : lows[0];

      // Aligned check (>= 12 each)
      const allAligned = entries.every(([_,s])=> s >= 12);

      topStrengthEl.textContent = DS.find(d=>d.key===topKey).label;
      priorityFocusEl.textContent = allAligned ? '‚Äî' : DS.find(d=>d.key===lowKey).label;

      // Bars
      barsEl.innerHTML = '';
      DS.forEach(d => {
        const s = scores[d.key];
        const pct = Math.round((s/15)*100);
        const sev = severity(s);
        const row = document.createElement('div');
        row.className = 'bar';
        row.innerHTML = `<div>${d.key}</div><div class="track"><div class="fill" style="width:${pct}%"></div></div><div class="severity ${sev.cls}" title="${sev.label}">${s}/15</div>`;
        barsEl.appendChild(row);
      });

      // Ending
      const end = allAligned ? ENDINGS.Aligned : ENDINGS[lowKey];
      endingEl.innerHTML = `<h3 style="margin:0 0 .4rem">${end.title}</h3><p style="white-space:pre-wrap">${end.body}</p>`;

      // CTA
      ctaEl.href = BOOKING_URL;

      // Show section
      document.getElementById('post').style.display='none';
      resEl.style.display='block';

      // Save minimal snapshot to localStorage
      const payload = {
        name: document.getElementById('name').value || null,
        email: document.getElementById('email').value || null,
        size: document.getElementById('size').value || null,
        feltWeakest: felt || null,
        why: document.getElementById('focusWhy').value || null,
        scores, topKey, lowKey: allAligned ? null : lowKey, allAligned,
        ts: new Date().toISOString()
      };
      try{ localStorage.setItem('sevenD_snapshot', JSON.stringify(payload)); }catch(e){}

      // Accessibility focus
      resEl.scrollIntoView({behavior:'smooth', block:'start'});
    }

    document.getElementById('seeResults').addEventListener('click', () => {
      // optional basic email check (no blocking if empty)
      const email = document.getElementById('email').value.trim();
      if(email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        alert('Please enter a valid email or leave it blank.');
        return;
      }
      if(!document.getElementById('feltWeakest').value){
        alert('Please select which D feels weakest.');
        return;
      }
      showResults();
    });

    document.getElementById('reset').addEventListener('click', () => {
      if(confirm('Clear your answers and start over?')) location.reload();
    });

    document.getElementById('retake').addEventListener('click', () => location.reload());

    document.getElementById('print').addEventListener('click', () => window.print());

    document.getElementById('copy').addEventListener('click', () => {
      const ls = localStorage.getItem('sevenD_snapshot');
      const obj = ls ? JSON.parse(ls) : null;
      const lines = [];
      if(obj){
        lines.push('7 D‚Äôs Business Alignment Snapshot');
        lines.push(`Top Strength: ${obj.topKey ?? '-'}\n`);
        lines.push(`Priority Focus: ${obj.lowKey ?? 'Beautifully Aligned'}`);
        DS.forEach(d=> lines.push(`${d.key}: ${obj.scores[d.key]}/15`));
        if(obj.why) lines.push(`\n90‚Äëday focus: ${obj.why}`);
      }
      navigator.clipboard.writeText(lines.join('\n')).then(()=>{
        alert('Results copied to clipboard!');
      });
    });
  </script>
</body>
</html>
